HTTP-GRPC CRUD Server
---------------------

Задачка от Wildberries

И так, что тут есть?

* Два микросервиса CRUD: 1й REST HTTP прокся для 2го GRPC Storage сервиса
* Самописный HTTP Router, весь REST реализован *без* каких либо библиотек
* Interceptors (на логгирование и трейс юзера) внедрены в обоих микросервисах
* Docker-Compose деплой make compose-run (env, ldflags)
* Sqlite хранилище, migrations, autoUpdateDate, softDelete, hooks


REST API
^^^^^^^^
.POST /user/create 
[options="header"]
|=======================
|Поле        |тип   |Обязательное     
|surname     |string|да     
|name        |string|нет     
|secondname  |string|нет
|age         |int32 |нет
|=======================
Создает юзера

_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _


.POST /user/get
[options="header"]
|=======================
|Поле                  |тип   |Обязательное  
|uid                   |string|нет   
|surname               |string|нет     
|name                  |string|нет     
|secondname            |string|нет
|age                   |int32 |нет
|register_date_imestamp|int64 |нет
|=======================
Возвращает список юзеров *отфильтрованнных* 
по вышеуказанным фильтрам

_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

.DELETE /user/delete
[options="header"]
|=======================
|Поле        |тип   |Обязательное     
|uid         |string|да   
|=======================
Удаляет юзера по uid

_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

.PATCH /user/update
[options="header"]
|=======================
|Поле        |тип   |Обязательное     
|uid         |string|да   
|surname     |string|нет     
|name        |string|нет     
|secondname  |string|нет
|age         |int32 |нет
|=======================
Обновляет данные юзера по uid

_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

.POST /store/create 
[options="header"]
|=======================
|Поле        |тип   |Обязательное     
|name        |string|да     
|address     |string|нет     
|working     |bool  |нет
|owner       |string|нет
|=======================
Создает магазин

_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

.POST /store/get
[options="header"]
|=======================
|Поле        |тип   |Обязательное  
|uid         |string|нет   
|name        |string|нет     
|address     |string|нет     
|working     |bool  |нет
|owner       |string|нет
|=======================
Возвращает список магазинов *отфильтрованнных* 
по вышеуказанным фильтрам

_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

.DELETE /store/delete
[options="header"]
|=======================
|Поле        |тип   |Обязательное     
|uid         |string|да   
|=======================
Удаляет магазин по uid

_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

.PATCH /store/update
[options="header"]
|=======================
|Поле        |тип   |Обязательное     
|uid         |string|да   
|name        |string|нет     
|address     |string|нет     
|working     |bool  |нет
|owner       |string|нет
|=======================
Обновляет данные магазина по uid

_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

Знатно так заморочился- потому что было интересно.
Т.З. было кратким, приходилось додумывать саомостоятельно, по этому что то возможно тут не по Т.З.

p.s. писал я всё это добро в состоянии овоща под температурой в ~38 градусов
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

p.p.s. примерно половину проекта написано через VR http://immersed.com

Ну и небольшой пример работы: ЛоГоВмАлОнЕбЫвАеТ
image:media/work.gif[]